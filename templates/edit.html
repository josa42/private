<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>{{if .IsNew}}Neuer Kontakt{{else}}Kontakt bearbeiten{{end}}</title>
	<style>
		body { font-family: Arial, sans-serif; margin: 20px; max-width: 600px; }
		.breadcrumb { margin-bottom: 20px; color: #666; }
		.breadcrumb a { color: #4CAF50; text-decoration: none; }
		.breadcrumb a:hover { text-decoration: underline; }
		.breadcrumb span { margin: 0 5px; }
		label { display: block; margin-top: 10px; font-weight: bold; }
		input { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; 
		        border-radius: 4px; box-sizing: border-box; }
		select { padding: 8px; margin-top: 5px; border: 1px solid #ddd; 
		         border-radius: 4px; box-sizing: border-box; }
		.name-fields { background-color: #f9f9f9; padding: 15px; border-radius: 4px; margin-bottom: 10px; }
		.or-divider { text-align: center; margin: 15px 0; color: #666; font-weight: bold; }
		.phone-row { display: flex; gap: 10px; margin-top: 10px; align-items: flex-start; }
		.phone-row > div:first-child { flex: 2; }
		.phone-row > div:last-child { flex: 1; }
		.btn { background-color: #4CAF50; color: white; padding: 10px 20px; 
		       border: none; border-radius: 4px; cursor: pointer; }
		.btn:hover { background-color: #45a049; }
		.cancel { background-color: #999; margin-right: 10px; text-decoration: none;
		          display: inline-block; padding: 10px 20px; color: white; border-radius: 4px; }
		.cancel:hover { background-color: #888; }
		.delete { background-color: #f44336; margin-right: auto; text-decoration: none;
		          display: inline-block; padding: 10px 20px; color: white; border-radius: 4px; border: none; cursor: pointer; }
		.delete:hover { background-color: #da190b; }
		.form-buttons { margin-top: 20px; display: flex; justify-content: flex-end; align-items: center; }
	</style>
</head>
<body>
	<nav class="breadcrumb">
		<a href="/">Home</a>
		<span>›</span>
		<a href="/contacts">Kontakte</a>
		<span>›</span>
		<span>{{if .IsNew}}Neuer Kontakt{{else}}{{if .Contact.CompanyName}}{{.Contact.CompanyName}}{{else if .Contact.FirstName}}{{.Contact.FirstName}} {{.Contact.LastName}}{{else}}{{.Contact.Phone.PhoneNumber}}{{end}}{{end}}</span>
	</nav>
	<h1>{{if .IsNew}}Neuer Kontakt{{else}}Kontakt bearbeiten{{end}}</h1>
	<form method="POST" onsubmit="return validateForm()">
		<input type="hidden" name="id" value="{{.ID}}">
		
		<div class="name-fields">
			<label>Vorname:</label>
			<input type="text" id="firstName" name="firstName" value="{{.Contact.FirstName}}">
			
			<label>Nachname:</label>
			<input type="text" id="lastName" name="lastName" value="{{.Contact.LastName}}">
		</div>
		
		<div class="or-divider">ODER</div>
		
		<label>Firmenname:</label>
		<input type="text" id="companyName" name="companyName" value="{{.Contact.CompanyName}}">
		
		<div class="phone-row">
			<div>
				<label>Telefonnummer:</label>
				<input type="text" name="phoneNumber" value="{{.Contact.Phone.PhoneNumber}}" required>
			</div>
			<div>
				<label>Typ:</label>
				<select name="phoneType" style="width: 100%;">
					<option value="cell" {{if eq .Contact.Phone.Type "cell"}}selected{{end}}>Mobil</option>
					<option value="work" {{if eq .Contact.Phone.Type "work"}}selected{{end}}>Firma</option>
					<option value="home" {{if eq .Contact.Phone.Type "home"}}selected{{end}}>Privat</option>
				</select>
			</div>
		</div>
		
		<div class="form-buttons">
			{{if not .IsNew}}
			<button type="submit" name="action" value="delete" class="delete" onclick="return confirm('Kontakt wirklich löschen?')">Löschen</button>
			{{end}}
			<a href="/contacts" class="cancel">Abbrechen</a>
			<button type="submit" class="btn">Speichern</button>
		</div>
	</form>

	<script>
		function validateForm() {
			const firstName = document.getElementById('firstName').value.trim();
			const lastName = document.getElementById('lastName').value.trim();
			const companyName = document.getElementById('companyName').value.trim();
			
			if (!firstName && !lastName && !companyName) {
				alert('Bitte geben Sie entweder einen Namen (Vor-/Nachname) oder einen Firmennamen ein.');
				return false;
			}
			return true;
		}
	</script>
</body>
</html>
